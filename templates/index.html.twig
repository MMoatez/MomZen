{% extends 'baseback.html.twig' %}

{% block title %}Liste des Consultations{% endblock %}

{% block body %}
<div class="container">
    <h1 class="title">üìë Liste des Consultations</h1>

    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>ü©∫ M√©decin</th>
                <th>üìÅ Dossier M√©dical</th>
                <th>üìú Ordonnance</th>
                <th>‚öô Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for consultation in consultations %}
                <tr>
                    <td>{{ consultation.id }}</td>
                    <td>{{ consultation.medecin ? consultation.medecin.prenom ~ ' ' ~ consultation.medecin.nom : 'N/A' }}</td>
                    <td>{{ consultation.dossiermedical.id }}</td>
                    <td>{{ consultation.ordonnance|length > 50 ? consultation.ordonnance|slice(0, 50) ~ '...' : consultation.ordonnance }}</td>
                    <td>
                        <a href="{{ path('app_consultation_show', {'id': consultation.id}) }}" class="btn btn-primary">üëÅ Voir</a>
                        <a href="{{ path('app_consultation_edit', {'id': consultation.id}) }}" class="btn btn-warning">‚úè Modifier</a>
                        <form method="post" action="{{ path('app_consultation_delete', {'id': consultation.id}) }}" onsubmit="return confirm('Voulez-vous vraiment supprimer cette consultation ?');" style="display:inline;">
    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ consultation.id) }}">
    <button type="submit" class="btn btn-danger">üóë Supprimer</button>
</form>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="5" class="no-data">üö® Aucune consultation trouv√©e.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{# üé® CSS Styling #}
<style>
    .container {
        max-width: 1000px;
        margin: auto;
        padding: 20px;
        text-align: center;
    }

    .title {
        font-size: 2rem;
        font-weight: bold;
        color: #2d6a4f;
        margin-bottom: 20px;
    }

    .table {
        width: 100%;
        border-collapse: collapse;
        background: #ffffff;
        border-radius: 12px;
        box-shadow: 0px 6px 20px rgba(0, 0, 0, 0.1);
    }

    .table th, .table td {
        padding: 12px;
        text-align: center;
        border-bottom: 1px solid #ddd;
    }

    .table th {
        background-color: #2d6a4f;
        color: white;
    }

    .table tr:nth-child(even) {
        background-color: #f9f9f9;
    }

    .table tr:hover {
        background-color: #c8e6c9;
        transition: 0.3s ease-in-out;
    }

    .btn {
        text-decoration: none;
        padding: 8px 12px;
        border-radius: 8px;
        font-size: 0.9rem;
        transition: 0.3s ease-in-out;
        display: inline-block;
        margin: 2px;
    }

    .btn-primary {
        background-color: #007bff;
        color: white;
    }

    .btn-primary:hover {
        background-color: #0056b3;
    }

    .btn-warning {
        background-color: #ffc107;
        color: black;
    }

    .btn-warning:hover {
        background-color: #e0a800;
    }

    .btn-danger {
        background-color: #dc3545;
        color: white;
    }

    .btn-danger:hover {
        background-color: #c82333;
    }

    .no-data {
        font-size: 1.2rem;
        font-weight: bold;
        color: #e74c3c;
        text-align: center;
        padding: 20px;
    }
</style>

{% endblock %}
